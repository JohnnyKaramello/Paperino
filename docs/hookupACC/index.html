<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Accelerometer - Paperino Docs</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
	
	<script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="..">Paperino Docs</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="..">Home</a>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Hookup guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../hookupEPD/">Micro EPD</a>
</li>
                            
<li class="active">
    <a href="./">Accelerometer</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../refEPD/">Micro EPD</a>
</li>
                            
<li >
    <a href="../refACCEL/">Accelerometer</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Examples <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../exampleHelloWorld/">Hello World!</a>
</li>
                            
<li >
    <a href="../exampleGFXdemo/">GFX demo</a>
</li>
                            
<li >
    <a href="../exampleUpdateMode/">Update Modes</a>
</li>
                            
<li >
    <a href="../exampleComingSoon/">Counter demo (tap-based)</a>
</li>
                            
<li >
    <a href="../exampleComingSoon/">Stop watch (tap-based)</a>
</li>
                            
<li >
    <a href="../exampleComingSoon/">Portrait/landscape detection</a>
</li>
                            
<li >
    <a href="../exampleComingSoon/">WakeOnTap demo</a>
</li>
                            
<li >
    <a href="../exampleComingSoon/">Thermometer</a>
</li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../hookupEPD/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../refEPD/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#the-accelerometer-hookup-guide">The Accelerometer hookup guide</a></li>
            <li><a href="#accelerometer-bma250e">Accelerometer BMA250E</a></li>
            <li><a href="#hardware-hookup">Hardware Hookup</a></li>
            <li><a href="#using-the-accelerometer">Using the Accelerometer</a></li>
            <li><a href="#first-example-hello-world">First Example: Hello World!</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="the-accelerometer-hookup-guide">The Accelerometer hookup guide</h1>
<p>In this tutorial we’ll give you a brief introduction to the Paperino Accelerometer, then we’ll jump into some example code. The tutorial is split into the following sections:</p>
<ul>
<li><a href="./">Accerelometer BMA250E</a> – To begin, we’ll have a look at the used accelerometer. </li>
<li><a href="./">Hardware Hookup</a> – In this section we’ll show you how to connect to an Arduino compatible MCU via SPI.</li>
<li><a href="./">Using the Accelerometer</a> – A quick examination of the family of accelerometer function calls.</li>
<li><a href="./">First Example: Hello World!</a> – First demo using the accelerometer.</li>
</ul>
<p>Beside the ePaper breakout board, you’ll need something to control the display. Optimally you’ll want something that has a 3.3V operating voltage. We’ll be using a Particle Photon as an example, which generates and exposes 3V3 on one of the pins.</p>
<h2 id="accelerometer-bma250e">Accelerometer BMA250E</h2>
<p>The BMA250E is a MEMS-based acceleration sensor from BOSCH. It supports measurement of the acceleration in three perpendicular axes. Furthermore it can be used to detect motion/no motion (for power saving) and tap-sensing (for touch simulation).</p>
<p><img alt="BMA250E" src="../img/BMA250E.png" /></p>
<h2 id="hardware-hookup">Hardware Hookup</h2>
<p>Now it’s time to wire it up! In this section we’ll go over the hookup, based on an Particle Photon. We’ll be using Particle’s hardware SPI pins in order to achieve the fastest data transfer speed. That means we’ll need to use pins for SPI connection as described in the table above. The other pins – RST, BSY, CS1/CS2 and IN1/IN2 – can be connected to any available digital pin on the Photon.</p>
<p>Here’s the example hookup:</p>
<p><img alt="Screenshot" src="../img/pinbelegung.jpg" /></p>
<h2 id="using-the-accelerometer">Using the Accelerometer</h2>
<p>Before you get started, here’s a quick overview of the <code>BO_BMA250</code> library and its initialisation procedure. You will see it is doable!</p>
<p>At the top of your code, where you include your required libraries, you should add the library <code>BO_BMA250</code> which does the setup and communication to the accelerometer. </p>
<pre><code>#include “BO_BMA250”
</code></pre>
<p>After you have included the library, you can create an object <code>accel</code> in the global variable area of your code. Now its also time to define the pin mapping:</p>
<pre><code>#define ACC_CS      D0      //Chip select pin, used to select the acceleration sensor

BO_BMA250       accel(ACC_CS);
</code></pre>
<p>In the example above we’ve called our <code>BO_BMA250</code> object <em>accel</em> (accelerometer), but you can call it anything you’d like. </p>
<p>The last step should occur in the setup() function. Stick an <code>accel.begin()</code> function in there, which will initialise the accelerometer for you.</p>
<pre><code>setup()
{
    accel.begin();      //Configure Accelerometer BOSCH BMA250E 
}
</code></pre>
<h2 id="first-example-hello-world">First Example: Hello World!</h2>
<p>Now we are ready to let test the thing! You can use the <code>activateTapOnInt1()</code> command to sense for taps as a trigger to start doing something.</p>
<pre><code>accel.activateTapOnInt1();      //Sets INT1 HIGH as soon as a tap is detected
</code></pre>
<p>The command <code>updateFull()</code> actually triggers the ePaper refresh, displaying the content of the image buffer. That’s it! To summarize everything, you can now see the complete code here:</p>
<pre><code>// PAPERINO: Tap detection used here to wake-up the Particle Photon and invert the display screen.
SYSTEM_MODE(SEMI_AUTOMATIC);
STARTUP(System.enableFeature(FEATURE_RETAINED_MEMORY));

#define EPD_RST     A0
#define EPD_BUSY    A1
#define EPD_CS      D5
#define ACC_CS      D6

#include &quot;Adafruit_mfGFX.h&quot;
#include &quot;PL_microEPD.h&quot;
#include &quot;BO_BMA250E.h&quot;
#include &quot;fonts.h&quot;

PL_microEPD display(EPD_CS, EPD_RST, EPD_BUSY);  
BO_BMA250   accel(ACC_CS);
retained int i = 0;

void setup() {
    SPI1.begin();
    SPI1.setBitOrder(MSBFIRST);                 
    SPI1.setDataMode(SPI_MODE0); 
    SPI1.setClockDivider(SPI_CLOCK_DIV4);

    i +=1;
    display.begin(false);
    display.setTextSize(2);
    display.setCursor(1,30);
    display.print(&quot;Hello World!&quot;);
    if (i%2) display.invertDisplay();
    display.updateFull();

    accel.begin();
    accel.activateTapOnInt1();
}

void loop() {
    System.sleep(SLEEP_MODE_DEEP,3600);
}
</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '..';</script>
        <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
        <script src="../js/base.js"></script><div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
